const Component=function(e){let t={};for(let e of document.querySelectorAll("component")){const r=e.getAttribute("name").toLowerCase(),o=e.querySelector("render"),n=e.querySelectorAll("param");t[r]={render:o.querySelector("*").cloneNode(!0),callback:e.getAttribute("bind"),params:[]};for(let e of n)t[r].params.push({name:e.getAttribute("name"),type:e.getAttribute("type")});e.remove()}const r=function(n){const a=n.tagName.toLowerCase();let l=t[a].render.cloneNode(!0);for(let e of n.attributes)"class"==e.nodeName?l.classList.add(e.nodeValue):l.setAttribute(e.nodeName,e.nodeValue);n.replaceWith(l);for(let e of l.querySelectorAll("*")){const o=e.tagName.toLowerCase();t[o]&&r(e)}let c={target:l,params:{},on:{},api:{components:t,rebuild:o,render:r}};for(let e of t[a].params){switch(e.type){case"Number":c.params[e.name]=parseFloat(n.getAttribute(`${e.name}`));break;default:c.params[e.name]=n.getAttribute(`${e.name}`)}n.removeAttribute(e.name)}l.innerHTML=l.innerHTML.replace(/\{\{(.*?)\}\}/g,e=>{e=function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}(e);let r=t[a].params.map((e,t,r)=>e.name);const o=e.slice(2,e.length-2);return new Function(...r,`return ${o}`).apply(null,Object.values(c.params))});for(let e of l.querySelectorAll("[c-src]"))e.setAttribute("src",e.getAttribute("c-src")),e.removeAttribute("c-src");const s=l.querySelector("root");let u;return s&&(u=l.querySelector("root").parentElement),s&&s.replaceWith(...n.childNodes),c.target.root=u,n.onload=t[a].callback?function(t){var r=e,o=t.split(".");for(i=0;i<o.length-1;i++)if(null==(r=r[o[i]]))return;return r[o[o.length-1]]}(t[a].callback)(c):null,n.callback&&n.callback(c),l},o=function(){for(let e of Object.keys(t))for(;document.getElementsByTagName(`${e}`).length>0;)r(document.getElementsByTagName(`${e}`)[0])};return o(),new MutationObserver(function(e,o){for(const o of e)if("childList"===o.type){let e=o.addedNodes[o.addedNodes.length-1];e&&1==e.nodeType&&t[e.tagName.toLowerCase()]&&r(e)}}).observe(document.body,{attributes:!0,childList:!0,subtree:!0}),{components:t,rebuild:o,render:r}},Element=function(e,t={}){let r=document.createElement(e.toLowerCase());for(let e of Object.keys(t))r.setAttribute(e,t[e]);return r};